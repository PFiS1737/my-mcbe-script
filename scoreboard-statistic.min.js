/*!
 * my-mcbe-script-scoreboard-statistic.js v0.0.0 (https://github.com/PFiS1737/my-mcbe-script#readme)
 * Copyright 2022-2024 PFiS1737
 * Licensed under MIT
 * 
 * This file is automatically generated, please do not change it.
 */
import{world as t,MinecraftDimensionTypes as e,Dimension as s,Entity as i,system as n,GameMode as r,EntityDamageCause as a,DisplaySlotId as o,ObjectiveSortOrder as c}from"@minecraft/server";import{MessageFormData as h,FormCancelationReason as l,ModalFormResponse as u,MessageFormResponse as d,ActionFormResponse as y,ModalFormData as p,ActionFormData as m}from"@minecraft/server-ui";class f{static error(t){console.error(`${t}\n${t.stack}`)}}function g(t,e,s){if(Array.isArray(t))t.forEach(e,s);else if(t?.[Symbol.iterator])for(const i of t)e.call(s,i,t);else"object"==typeof t&&g(Object.keys(t),((i,n)=>e.call(s,t[i],i,n,t)))}async function w(t,e,s){if(Array.isArray(t))for(let i=0;i<t.length;i++)await e.call(s,t[i],i,t);else if(t?.[Symbol.iterator])for(const i of t)await e.call(s,i,t);else"object"==typeof t&&await w(Object.keys(t),(async(i,n)=>await e.call(s,t[i],i,n,t)))}function v(t){try{return JSON.parse(t)}catch(e){return function(t,e={}){return new Function(...Object.keys(e),`return ${t}`)(...Object.values(e))}(`(${t})`)}}function b(t){return"AsyncFunction"===t[Symbol.toStringTag]}const _=t.getDimension(e.overworld),M=new Set;class x{static run(t,e=_){if(e instanceof s||e instanceof i)return e.runCommand(t);throw new TypeError("Target must be Entity or Dimension.")}static async asyncRun(t,e=_){if(!(e instanceof s||e instanceof i))throw new TypeError("Target must be Entity or Dimension.");{const s=[...M].filter((({regex:e})=>e.test(t))).map((t=>t.runner));if(!s.length)return await e.runCommandAsync(t);await w(s,(async s=>await s(t,e)))}}static register(e,s,i){if(e.startsWith("/"))throw new Error("Unable to register slash commands.");const n=new RegExp(`^${e}${s}( |$)`),r=async(t,e)=>{const s=t.split(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g).filter((t=>t.trim().length>0));await i(s,e)};M.add({regex:n,runner:r}),t.beforeEvents.chatSend.subscribe((t=>{n.test(t.message)&&(t.cancel=!0,r(t.message,t.sender).catch(f.error))}))}}class S{constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.z=s}static parse(t){return new this(...t.split(" ").map(Number))}static create(t){if(Array.isArray(t))return new this(...t);if("string"==typeof t)return S.parse(t);if("object"==typeof t)return new this(t.x,t.y,t.z);throw new TypeError('The argument "vector" must be an array, a vector string or a vector object.')}stringify(){return this[Symbol.toPrimitive]("string")}toArray(){return[...this]}[Symbol.toPrimitive](t){return"string"===t?`${this.x} ${this.y} ${this.z}`:this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}function I(t){return t>=0?Math.round(t):t%.5==0?Math.floor(t):Math.round(t)}function z(t,e,s=1e-6){return Math.abs(t-e)<=s*Math.max(1,Math.abs(t),Math.abs(e))}function E(t){return t>1?t*E(t-1):1}function $(t,e,s){return i=>t**(s-i)*e**i*function(t,e){return E(t)/(E(e)*E(t-e))}(s,i)}function A(t,e,s){let i=0;for(let n=t;n<=e;n++)i+=s(n);return i}class N{static clone(t){return k.create(t)}static add(t,e){return new k(t.x+e.x,t.y+e.y,t.z+e.z)}static subtract(t,e){return new k(t.x-e.x,t.y-e.y,t.z-e.z)}static multiply(t,e){return new k(t.x*e.x,t.y*e.y,t.z*e.z)}static divide(t,e){return new k(t.x/e.x,t.y/e.y,t.z/e.z)}static scale(t,e){return new k(t.x*e,t.y*e,t.z*e)}static negate(t){return new k(-t.x,-t.y,-t.z)}static inverse(t){return new k(1/t.x,1/t.y,1/t.z)}static exchange(t,e=[]){if(2!==e.length)throw new Error("You could only exchange two axes.");const s=N.clone(t),i=s[e[0]],n=s[e[1]];return s[e[0]]=n,s[e[1]]=i,s}static exactEquals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}static equals(t,e){return z(t.x,e.x)&&z(t.y,e.y)&&z(t.z,e.z)}static max(...t){return new k(Math.max(...t.map((({x:t})=>t))),Math.max(...t.map((({y:t})=>t))),Math.max(...t.map((({z:t})=>t))))}static min(...t){return new k(Math.min(...t.map((({x:t})=>t))),Math.min(...t.map((({y:t})=>t))),Math.min(...t.map((({z:t})=>t))))}static floor(t){return new k(Math.floor(t.x),Math.floor(t.y),Math.floor(t.z))}static ceil(t){return new k(Math.ceil(t.x),Math.ceil(t.y),Math.ceil(t.z))}static round(t){return new k(I(t.x),I(t.y),I(t.z))}static abs(t){return new k(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z))}static maxMagnitude(...t){return t.reduce(((t,e)=>N.magnitude(e)>N.magnitude(t)?e:t))}static minMagnitude(...t){return t.reduce(((t,e)=>N.magnitude(e)<N.magnitude(t)?e:t))}static magnitude(t){return Math.sqrt(N.squaredMagnitude(t))}static squaredMagnitude(t){return t.x**2+t.y**2+t.z**2}static distance(t,e){return Math.sqrt(N.squaredDistance(t,e))}static squaredDistance(t,e){return(e.x-t.x)**2+(e.y-t.y)**2+(e.x-t.z)**2}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static cross(t,e){return new k(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}static normalize(t){const e=N.magnitude(t);return e?N.scale(t,1/e):new k(0,0,0)}static angle(t,e){const s=N.dot(N.normalize(t),N.normalize(e));return Math.acos(s)}static random(t=1){const e=2*Math.random()*Math.PI,s=2*Math.random()-1,i=Math.sqrt(1-s*s)*t;return new k(Math.cos(e)*i,Math.sin(e)*i,s*t)}static lerp(t,e,s){return new k(t.x*(1-s)+e.x*s,t.y*(1-s)+e.y*s,t.z*(1-s)+e.z*s)}static slerp(t,e,s){if(s<=0)return N.clone(t);if(s>=1)return N.clone(e);const i=N.angle(t,e),n=Math.sin(i);if(n<=Number.EPSILON)return N.lerp(t,e,s);const r=Math.sin(i*(1-s))/n,a=Math.sin(i*s)/n;return new k(t.x*r+e.x*a,t.y*r+e.y*a,t.z*r+e.z*a)}static bezier(t,e){const s=t.length-1,i=$(1-e,e,s);return new k(A(0,s,(e=>t[e].x*i(e))),A(0,s,(e=>t[e].y*i(e))),A(0,s,(e=>t[e].z*i(e))))}}class k extends S{get magnitude(){return N.magnitude(this)}get squaredMagnitude(){return N.squaredMagnitude(this)}get normalized(){return N.normalize(this)}get floored(){return N.floor(this)}get ceiled(){return N.ceil(this)}get rounded(){return N.round(this)}get absolute(){return N.abs(this)}set(t,e,s){return this.x=t,this.y=e,this.z=s,this}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}clone(){return new k(this.x,this.y,this.z)}equals(t){return N.equals(this,t)}distance(t){return N.distance(this,t)}squaredDistance(t){return N.squaredDistance(this,t)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}inverse(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this}floor(){return this.copy(N.floor(this)),this}ceil(){return this.copy(N.ceil(this)),this}round(){return this.copy(N.round(this)),this}abs(){return this.copy(N.abs(this)),this}normalize(){return this.copy(N.normalize(this)),this}}class B extends k{get centerCorrected(){return new B(...N.add(this.floored,new k(.5,.5,.5)))}clone(){return new B(this.x,this.y,this.z)}equals(t){return N.exactEquals(this,t)}offset(t){return this.add(t)}isNear(t,e){return this.distance(t)<=e}}function D(t){return new Promise(((e,s)=>{n.run((()=>{try{e(t())}catch(t){s(t)}}))}))}function O(t,e){const s=new Error(t);return e.sendMessage(s.toString()),s}function P(e,s){const i=t.scoreboard.getObjective(e);if(!i&&!s)throw new Error(`Couldn't find objective "${e}".`);return i||t.scoreboard.addObjective(e,s)}class T{constructor(t){this.code=t}get name(){switch(this.code){case 0:return"East";case 1:return"South";case 2:return"Up";case 3:return"West";case 4:return"North";case 5:return"Down"}}isEast(){return 0===this.code}isSouth(){return 1===this.code}isUp(){return 2===this.code}isWest(){return 3===this.code}isNorth(){return 4===this.code}isDown(){return 5===this.code}equals(t){return this.code===t.code}getOpposite(){const t=this.code+3;return new T(t>=6?t-6:t)}isOppositeTo(t){return 3===Math.abs(this.code-t.code)}}class j{static East=new T(0);static South=new T(1);static Up=new T(2);static West=new T(3);static North=new T(4);static Down=new T(5)}class C{static wrap(...t){return new this(...t)}static tryWrap(...t){try{return new this(...t)}catch(t){}}static match(){throw new Error("Call without override.")}}class R extends C{components=new Map;constructor(t){super(),this._entity=t,this.id=t.id,this.typeId=t.typeId,this.scoreboardIdentity=t.scoreboardIdentity;g(t.getComponents(),(t=>{this.components.set(t.typeId.replace(/^minecraft\:/,""),t)}))}get nameTag(){return this._entity.nameTag}get location(){return B.create(this._entity.location)}get dimension(){return this._entity.dimension}get isSneaking(){return this._entity.isSneaking}getRotation(){return this._entity.getRotation()}getFacingDirectionXZ(){const t=this.getRotation().y;return t>-135&&t<=-45?j.East:t>-45&&t<=45?j.South:t>45&&t<=135?j.West:t>135||t<=-135?j.North:void 0}}class V extends C{constructor(t){super(),this._container=t}get size(){return this._container.size}get emptySlotsCount(){return this._container.emptySlotsCount}getItem(t){return this._container.getItem(t)}setItem(t,e){return this._container.setItem(t,e)}tryAddItem(t){return this._container.addItem(t)}}class U extends V{constructor(t,e){super(e),this._entity=t}get location(){return this._entity.location}get dimension(){return this._entity.dimension}addItem(t){const e=this.tryAddItem(t);e&&this.dimension.spawnItem(e,this.location)}}class F extends R{constructor(t){super(t),this.name=t.name}static match(t){return"minecraft:player"===t.typeId}get _player(){return this._entity}get experience(){return this.addExperience(0)}get level(){return this._player.level}get inventory(){return new U(this,this.components.get("inventory").container)}get selectedSlot(){return this._player.selectedSlot}getGameMode(){const t=[];return g(r,(e=>{this.testGameMode(e)&&t.push(e)})),t[0]}testGameMode(t){return this.dimension.getPlayers({gameMode:t}).some((t=>t.id===this.id))}setGameMode(t){if(!Object.values(r).includes(t))throw new TypeError("Unknown gamemode.");x.run(`gamemode ${t}`,this._player)}getMainHandItem(){return this.inventory.getItem(this.selectedSlot)}setMainHandItem(t){this.inventory.setItem(this.selectedSlot,t)}async useItemFromInventory(t,e=(async t=>{})){let s=this.inventory.getItem(t);s=await e(s),this.inventory.setItem(t,s)}async useMainHandItem(t=(async()=>{})){await this.useItemFromInventory(this.selectedSlot,t)}addExperience(t=0,{useXpOrb:e=!1}={}){if(e&&t>=0){for(;t--;)this.dimension.spawnEntity("minecraft:xp_orb",this.location);return this.experience}return this._player.addExperience(t)}addLevels(t=0){return this._player.addLevels(t)}}function q(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L,W,K={exports:{}},J={exports:{}};L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&W.rotl(t,8)|4278255360&W.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=W.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],s=0,i=0;s<t.length;s++,i+=8)e[i>>>5]|=t[s]<<24-i%32;return e},wordsToBytes:function(t){for(var e=[],s=0;s<32*t.length;s+=8)e.push(t[s>>>5]>>>24-s%32&255);return e},bytesToHex:function(t){for(var e=[],s=0;s<t.length;s++)e.push((t[s]>>>4).toString(16)),e.push((15&t[s]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],s=0;s<t.length;s+=2)e.push(parseInt(t.substr(s,2),16));return e},bytesToBase64:function(t){for(var e=[],s=0;s<t.length;s+=3)for(var i=t[s]<<16|t[s+1]<<8|t[s+2],n=0;n<4;n++)8*s+6*n<=8*t.length?e.push(L.charAt(i>>>6*(3-n)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],s=0,i=0;s<t.length;i=++s%4)0!=i&&e.push((L.indexOf(t.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<2*i|L.indexOf(t.charAt(s))>>>6-2*i);return e}},J.exports=W;var G=J.exports,H={utf8:{stringToBytes:function(t){return H.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(H.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],s=0;s<t.length;s++)e.push(255&t.charCodeAt(s));return e},bytesToString:function(t){for(var e=[],s=0;s<t.length;s++)e.push(String.fromCharCode(t[s]));return e.join("")}}},X=H,Z=function(t){return null!=t&&(Y(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Y(t.slice(0,0))}(t)||!!t._isBuffer)};function Y(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}!function(){var t=G,e=X.utf8,s=Z,i=X.bin,n=function(r,a){r.constructor==String?r=a&&"binary"===a.encoding?i.stringToBytes(r):e.stringToBytes(r):s(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var o=t.bytesToWords(r),c=8*r.length,h=1732584193,l=-271733879,u=-1732584194,d=271733878,y=0;y<o.length;y++)o[y]=16711935&(o[y]<<8|o[y]>>>24)|4278255360&(o[y]<<24|o[y]>>>8);o[c>>>5]|=128<<c%32,o[14+(c+64>>>9<<4)]=c;var p=n._ff,m=n._gg,f=n._hh,g=n._ii;for(y=0;y<o.length;y+=16){var w=h,v=l,b=u,_=d;h=p(h,l,u,d,o[y+0],7,-680876936),d=p(d,h,l,u,o[y+1],12,-389564586),u=p(u,d,h,l,o[y+2],17,606105819),l=p(l,u,d,h,o[y+3],22,-1044525330),h=p(h,l,u,d,o[y+4],7,-176418897),d=p(d,h,l,u,o[y+5],12,1200080426),u=p(u,d,h,l,o[y+6],17,-1473231341),l=p(l,u,d,h,o[y+7],22,-45705983),h=p(h,l,u,d,o[y+8],7,1770035416),d=p(d,h,l,u,o[y+9],12,-1958414417),u=p(u,d,h,l,o[y+10],17,-42063),l=p(l,u,d,h,o[y+11],22,-1990404162),h=p(h,l,u,d,o[y+12],7,1804603682),d=p(d,h,l,u,o[y+13],12,-40341101),u=p(u,d,h,l,o[y+14],17,-1502002290),h=m(h,l=p(l,u,d,h,o[y+15],22,1236535329),u,d,o[y+1],5,-165796510),d=m(d,h,l,u,o[y+6],9,-1069501632),u=m(u,d,h,l,o[y+11],14,643717713),l=m(l,u,d,h,o[y+0],20,-373897302),h=m(h,l,u,d,o[y+5],5,-701558691),d=m(d,h,l,u,o[y+10],9,38016083),u=m(u,d,h,l,o[y+15],14,-660478335),l=m(l,u,d,h,o[y+4],20,-405537848),h=m(h,l,u,d,o[y+9],5,568446438),d=m(d,h,l,u,o[y+14],9,-1019803690),u=m(u,d,h,l,o[y+3],14,-187363961),l=m(l,u,d,h,o[y+8],20,1163531501),h=m(h,l,u,d,o[y+13],5,-1444681467),d=m(d,h,l,u,o[y+2],9,-51403784),u=m(u,d,h,l,o[y+7],14,1735328473),h=f(h,l=m(l,u,d,h,o[y+12],20,-1926607734),u,d,o[y+5],4,-378558),d=f(d,h,l,u,o[y+8],11,-2022574463),u=f(u,d,h,l,o[y+11],16,1839030562),l=f(l,u,d,h,o[y+14],23,-35309556),h=f(h,l,u,d,o[y+1],4,-1530992060),d=f(d,h,l,u,o[y+4],11,1272893353),u=f(u,d,h,l,o[y+7],16,-155497632),l=f(l,u,d,h,o[y+10],23,-1094730640),h=f(h,l,u,d,o[y+13],4,681279174),d=f(d,h,l,u,o[y+0],11,-358537222),u=f(u,d,h,l,o[y+3],16,-722521979),l=f(l,u,d,h,o[y+6],23,76029189),h=f(h,l,u,d,o[y+9],4,-640364487),d=f(d,h,l,u,o[y+12],11,-421815835),u=f(u,d,h,l,o[y+15],16,530742520),h=g(h,l=f(l,u,d,h,o[y+2],23,-995338651),u,d,o[y+0],6,-198630844),d=g(d,h,l,u,o[y+7],10,1126891415),u=g(u,d,h,l,o[y+14],15,-1416354905),l=g(l,u,d,h,o[y+5],21,-57434055),h=g(h,l,u,d,o[y+12],6,1700485571),d=g(d,h,l,u,o[y+3],10,-1894986606),u=g(u,d,h,l,o[y+10],15,-1051523),l=g(l,u,d,h,o[y+1],21,-2054922799),h=g(h,l,u,d,o[y+8],6,1873313359),d=g(d,h,l,u,o[y+15],10,-30611744),u=g(u,d,h,l,o[y+6],15,-1560198380),l=g(l,u,d,h,o[y+13],21,1309151649),h=g(h,l,u,d,o[y+4],6,-145523070),d=g(d,h,l,u,o[y+11],10,-1120210379),u=g(u,d,h,l,o[y+2],15,718787259),l=g(l,u,d,h,o[y+9],21,-343485551),h=h+w>>>0,l=l+v>>>0,u=u+b>>>0,d=d+_>>>0}return t.endian([h,l,u,d])};n._ff=function(t,e,s,i,n,r,a){var o=t+(e&s|~e&i)+(n>>>0)+a;return(o<<r|o>>>32-r)+e},n._gg=function(t,e,s,i,n,r,a){var o=t+(e&i|s&~i)+(n>>>0)+a;return(o<<r|o>>>32-r)+e},n._hh=function(t,e,s,i,n,r,a){var o=t+(e^s^i)+(n>>>0)+a;return(o<<r|o>>>32-r)+e},n._ii=function(t,e,s,i,n,r,a){var o=t+(s^(e|~i))+(n>>>0)+a;return(o<<r|o>>>32-r)+e},n._blocksize=16,n._digestsize=16,K.exports=function(e,s){if(null==e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(n(e,s));return s&&s.asBytes?r:s&&s.asString?i.bytesToString(r):t.bytesToHex(r)}}();var Q=q(K.exports),tt=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};tt.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0}},tt.prototype.init_by_array=function(t,e){var s,i,n;for(this.init_seed(19650218),s=1,i=0,n=this.N>e?this.N:e;n;n--){var r=this.mt[s-1]^this.mt[s-1]>>>30;this.mt[s]=(this.mt[s]^(1664525*((4294901760&r)>>>16)<<16)+1664525*(65535&r))+t[i]+i,this.mt[s]>>>=0,i++,++s>=this.N&&(this.mt[0]=this.mt[this.N-1],s=1),i>=e&&(i=0)}for(n=this.N-1;n;n--){r=this.mt[s-1]^this.mt[s-1]>>>30;this.mt[s]=(this.mt[s]^(1566083941*((4294901760&r)>>>16)<<16)+1566083941*(65535&r))-s,this.mt[s]>>>=0,++s>=this.N&&(this.mt[0]=this.mt[this.N-1],s=1)}this.mt[0]=2147483648},tt.prototype.random_int=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var s;for(this.mti==this.N+1&&this.init_seed(5489),s=0;s<this.N-this.M;s++)t=this.mt[s]&this.UPPER_MASK|this.mt[s+1]&this.LOWER_MASK,this.mt[s]=this.mt[s+this.M]^t>>>1^e[1&t];for(;s<this.N-1;s++)t=this.mt[s]&this.UPPER_MASK|this.mt[s+1]&this.LOWER_MASK,this.mt[s]=this.mt[s+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},tt.prototype.random_int31=function(){return this.random_int()>>>1},tt.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},tt.prototype.random=function(){return this.random_int()*(1/4294967296)},tt.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},tt.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)};var et=new tt(Math.random()*Number.MAX_SAFE_INTEGER);var st=q((function(t){var e=t.length;for(;e--;)t[e]=Math.floor(256*et.random());return t}));const it=function(){const t=(e=16,st(new Uint8Array(e)));var e;let s="";for(let e=0;e<16;++e)s+=t[e].toString(16);return s}(),nt=new RegExp(`(\\\\)?"@__(F|R|D|M|S|A|U|I|B|L)-${it}-(\\d+)__@"`,"g"),rt=/\{\s*\[native code\]\s*\}/g,at=/function.*?\(/,ot=/.*?=>.*?/,ct=/[<>\/\u2028\u2029]/g,ht=["*","async"],lt={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function ut(t){return lt[t]}function dt(t,e){e||(e={}),"number"!=typeof e&&"string"!=typeof e||(e={space:e});const s=[],i=[],n=[],r=[],a=[],o=[],c=[],h=[];if(e.ignoreFunction&&"function"==typeof t&&(t=void 0),void 0===t)return String(t);let l;return l=e.isJSON&&!e.space?JSON.stringify(t):JSON.stringify(t,e.isJSON?null:function(t,l){if(e.ignoreFunction&&function(t){const e=[];for(const s in t)"function"==typeof t[s]&&e.push(s);for(let s=0;s<e.length;s++)delete t[e[s]]}(l),!l&&void 0!==l)return l;const u=this[t],d=typeof u;if("object"===d){if(u instanceof RegExp)return`@__R-${it}-${i.push(u)-1}__@`;if(u instanceof Date)return`@__D-${it}-${n.push(u)-1}__@`;if(u instanceof Map)return`@__M-${it}-${r.push(u)-1}__@`;if(u instanceof Set)return`@__S-${it}-${a.push(u)-1}__@`;if(Array.isArray(u)&&u.filter((()=>!0)).length!==u.length)return`@__A-${it}-${o.push(u)-1}__@`}return"function"===d?`@__F-${it}-${s.push(u)-1}__@`:"undefined"===d?`@__U-${it}-${c.push(u)-1}__@`:"number"!==d||Number.isNaN(u)||Number.isFinite(u)?l:`@__I-${it}-${h.push(u)-1}__@`},e.space),"string"!=typeof l?String(l):(!0!==e.unsafe&&(l=l.replace(ct,ut)),0===s.length&&0===i.length&&0===n.length&&0===r.length&&0===a.length&&0===o.length&&0===c.length&&0===h.length?l:l.replace(nt,((t,c,l,u)=>{if(c)return t;if("D"===l)return`new Date("${n[u].toISOString()}")`;if("R"===l)return`new RegExp(${dt(i[u].source)}, "${i[u].flags}")`;if("M"===l)return`new Map(${dt(Array.from(r[u].entries()),e)})`;if("S"===l)return`new Set(${dt(Array.from(a[u].values()),e)})`;if("A"===l)return`Array.prototype.slice.call(${dt(Object.assign({length:o[u].length},o[u]),e)})`;if("U"===l)return"undefined";if("I"===l)return h[u];return function(t){const e=t.toString();if(rt.test(e))throw new TypeError(`Serializing native function: ${t.name}`);if(at.test(e))return e;if(ot.test(e))return e;const s=e.indexOf("("),i=e.substr(0,s).trim().split(" ").filter((t=>t.length>0));return i.filter((t=>-1===ht.indexOf(t))).length>0?`${i.indexOf("async")>-1?"async ":""}function${i.join("").indexOf("*")>-1?"*":""}${e.substr(s)}`:e}(s[u])})))}const yt=new Map;class pt{static open(t,e){return new pt(t,e)}constructor(t,e){const s=Q(`db:${e}_${t.id}`).slice(8,24);this.id=s,this.objective=P(s,`db:${e}`),this._syncDataFromScoreboard(),yt.set(s,this)}store=new Map;_syncDataFromScoreboard(){this.store.clear(),g(this.objective.getParticipants(),(t=>{const e=v(t.displayName),s=Object.keys(e)[0],i=e[s];this.store.set(s,{value:i,participant:t})}))}has(t){return this.store.has(t)}async delete(t){if(this.has(t)){const{participant:e}=this.store.get(t);return await D((()=>this.objective.removeParticipant(e))),this.store.delete(t),!0}return!1}async clear(){await w(this.store,(async([,{participant:t}])=>await D((()=>this.objective.removeParticipant(t))))),this.store.clear()}get(t){if(this.has(t))return this.store.get(t).value}async set(t,e){await this.delete(t);const s=dt({[t]:e}).replaceAll('"',"'");if(s.length>32767)throw new RangeError("Database: Only accepts a string value less than 32767 characters.");await D((()=>this.objective.setScore(s,1))),this._syncDataFromScoreboard()}getAll(){const t={};for(const[e,s]of this)t[e]=s;return t}*entries(){for(const[t,{value:e}]of this.store.entries())yield[t,e]}*keys(){for(const t of this.store.keys())yield t}*values(){for(const{value:t}of this.store.values())yield t}[Symbol.iterator](){return this.entries()}}const mt=new pt({id:"global"},"scoreboard-statistic-global"),ft=new Map;class gt{constructor(t){this.db=new pt(t,"scoreboard-statistic-player"),this.player=t}events=new Map;static init(t){const e=new gt(t);return ft.set(t,e),e}async addParticipated(t){const e=this.getParticipated();e.add(t),await this.db.set("__participated__",e)}getParticipated(){return new Set(this.db.get("__participated__")??[])}setEvents(t,e){this.events.set(t,e)}getEvents(t){return this.events.get(t)}async add(t,e){await this.addParticipated(t),this.setEvents(t,e)}has(t){return this.events.has(t)&&this.getParticipated().has(t)}async delete(t){const e=this.getParticipated();if(e.has(t))return e.delete(t),await this.db.set("__participated__",e),this.events.delete(t),!0}async clear(){await this.db.clear(),this.events.clear()}}class wt{static async confirm({title:t="确认",body:e,target:s,onCancel:i=(async()=>{}),onConfirm:n=(async()=>{})}){if(!e||!s)throw new Error;const r=await D((()=>new wt({dialog:(new h).title(t).body(e).button1("CANCEL").button2("OK"),onClose:i,onSelectButton1:i,onSelectButton2:n})));return await r.show(s)}constructor({dialog:t,onClose:e=(async()=>{}),onSubmit:s=(async t=>{}),onSelectButton1:i=(async()=>{}),onSelectButton2:n=(async()=>{}),onSelect:r=(async t=>{})}){this.dialog=t,this.onSubmit=s,this.onSelectButton1=i,this.onSelectButton2=n,this.onSelect=r,this.onClose=e}async show(t){let e;t.sendMessage("[!] 新对话框已发送，请关闭命令输入栏或其他对话框");do{e=await this.dialog.show(t)}while(e.cancelationReason===l.UserBusy);if(e.canceled&&e.cancelationReason===l.UserClosed)return await this.onClose();if(e instanceof u)return await this.onSubmit(e.formValues);if(e instanceof d){if(0===e.selection)return await this.onSelectButton1();if(1===e.selection)return await this.onSelectButton2()}else if(e instanceof y)return await this.onSelect(e.selection);return e}}class vt{constructor(){this._events={}}on(t,e){if(b(e)){const s=`${t}.async`;this._events[s]?this._events[s].push(e):this._events[s]=[e]}else this._events[t]?this._events[t].push(e):this._events[t]=[e];return this}once(t,e){if(b(e)){const s=`${t}.async`,i=async(...t)=>{await e(...t),this.removeListener(s,i)};this._events[s]?this._events[s].push(i):this._events[s]=[i]}else{const s=(...i)=>{e(...i),this.removeListener(t,s)};this._events[t]?this._events[t].push(s):this._events[t]=[s]}return this}removeListener(t,e){if(this._events[t]){const s=[];g(this._events[t],(t=>{t!==e&&s.push(t)})),this._events[t]=s}return this}async emit(t,...e){this._events[t]&&g(this._events[t],(t=>t(...e))),await this.asyncEmit(t,...e)}async asyncEmit(t,...e){const s=`${t}.async`;this._events[s]&&await w(this._events[s],(async t=>await t(...e)))}addListener(t,e){return this.on(t,e)}off(t,e){return this.removeListener(t,e)}}class bt{constructor(t,e,s=1){this.min=t,this.max=e,this.step=s}toArray(){return function(t,e,s=1){const i=[];for(let n=t;n<e;n+=s)i.push(n);return i}(this.min,this.max+this.step,this.step)}get array(){return this.toArray()}includes(t){return this.array.includes(t)}[Symbol.iterator](){return this.array.values()}}class _t{constructor({name:t,description:e,range:s=[0,1,1],defaultValue:i,events:n,reload:r,_player:a}){this.name=t,this.description=e,this.range=new bt(...s),this.events=new vt,this.reload=r,this._defaultValue=i,this._player=a,n&&g(n,((t,e)=>this.events.on(e,t))),void 0!==i&&this._includes(i)?this.selected=i:this.selected=this.range.min,this.events.emit("inited",this.selected,a),this.events.emit("changed",this.selected,void 0,a)}select(t){return!(this.selected===t||!this._includes(t))&&(this.original=this.selected,this.selected=t,this.events.emit("selected",this.selected,this.original,this._player),this.events.emit("changed",this.selected,this.original,this._player),!0)}_includes(t){return this.range.includes(t)}}class Mt{constructor({name:t,description:e,values:s=[],defaultValue:i,events:n,reload:r,_player:a}){this.name=t,this.description=e,this.values=new Map(s.map((t=>("object"!=typeof t[0]&&void 0!==t[0]||(t[0]=dt(t[0])),!0!==t[0]||t[1]?!1!==t[0]||t[1]||(t[1]="关闭"):t[1]="开启",t)))),this.events=new vt,this.reload=r,this._defaultValue=i,this._player=a,n&&g(n,((t,e)=>this.events.on(e,t))),void 0!==i&&this.hasVal(i)?this.selected=i:s[0]&&(this.selected=s[0][0]),this.events.emit("inited",this.selected,a),this.events.emit("changed",this.selected,void 0,a)}select(t){return!(this.selected===t||!this.hasVal(t))&&(this.original=this.selected,this.selected=t,this.events.emit("selected",this.selected,this.original,this._player),this.events.emit("changed",this.selected,this.original,this._player),!0)}hasVal(t){return this.values.has(t)||!this.values.size}}class xt{constructor(t,e){this.name=e,this.db=pt.open(t,`option-manager:${e}`),this.player=t}items={};addItem(t){return t.range?this.items[t.name]=new _t(t):t.values&&(this.items[t.name]=new Mt(t)),this}async _syncToDB(){const t=this.getItemValMap();await w(t,(async(t,e)=>{await this.db.set(e,t)})),await w(this.db,(async([t,e])=>{this.hasItem(t)||await this.db.delete(t)}))}async _syncFromDB(){g(this.db,(([t,e])=>this.setItemVal(t,e,void 0,{syncFromDB:!0}))),await this._syncToDB()}async init(){return this.addItem=void 0,await this._syncFromDB(),this.getItemValMap()}_getItem(t){return this.items[t]}hasItem(t){return!!this.items[t]}setItemVal(t,e,s=((t,e,s)=>{}),{syncFromDB:i=!1}={}){const n=this._getItem(t);if(n){n.select(e)&&(!i&&n.reload&&(this.reload=!0),s(n.selected,n.original,this.getItemValMap()))}return this}getItemVal(t){const e=this._getItem(t);if(e)return e.selected}getItemValMap(){const t={};return g(this.items,((e,s)=>{t[s]=this.getItemVal(s)})),t}async done(t){const e=async({reply:t=!0}={})=>{await this._syncToDB(),t&&this.player.sendMessage("设置选项修改成功")};this.reload?(this.reload=!1,await wt.confirm({body:'你选择的项目更改后需要刷新脚本，请手动运行 "/reload" 命令。\n\n您也可以取消您的更改',target:this.player,onConfirm:async()=>{await e({reply:!1})},onCancel:async()=>{await this._syncFromDB(),await this.showDialog(t)}})):await e()}async showDialog(t){const e=(new p).title(`${this.name} 选项`),s=[];g(this.items,(t=>{if(t instanceof Mt){const{name:i,description:n,values:r,selected:a}=t;if(2===r.size&&r.get(!0)&&r.get(!1)){const t=new Map;g(r,(([e])=>t.set(e,e))),s.push({name:i,valuesMap:t}),e.toggle(n,a)}else{const t=[...r],o=new Map;g(t,(([t],e)=>o.set(e,t))),s.push({name:i,valuesMap:o}),e.dropdown(n,t.map((t=>t[1])),t.map((t=>t[0])).findIndex((t=>t===a)))}}else if(t instanceof _t){const{name:i,description:n,range:r,selected:a}=t,o=new Map;g(r,(t=>o.set(t,t))),s.push({name:i,valuesMap:o}),e.slider(n,r.min,r.max,r.step,a)}}));const i=new wt({dialog:e,onClose:async()=>{t&&await t.show(this.player)},onSubmit:async e=>{g(e,((t,e)=>{const{name:i,valuesMap:n}=s[e],r=n.get(t);this.setItemVal(i,r)})),await this.done(t)}});await i.show(this.player)}}class St{constructor(t){this.name=t}players=new Map;_items=new Set;addItem(t){return this._items.add(t),this}applyPlayer(t){if(this.players.has(t))return this.players.get(t);const e=new xt(t,this.name);return g(this._items,(s=>{s._player=t,e.addItem(s)})),this.players.set(t,e),e}async applyMainPlayer(){const e=await function(){const e=t.getAllPlayers();return e.length?Promise.resolve(e[0]):new Promise((e=>{const s=t.afterEvents.playerSpawn.subscribe((i=>{i.initialSpawn&&e(i.player),t.afterEvents.playerSpawn.unsubscribe(s)}))}))}();return this.applyPlayer(e)}async init(){const t=new Map;return await w(this.players,(async([e,s])=>{const i=await s.init();t.set(e,i)})),this.applyPlayer=void 0,t}getPlayer(t){return this.players.get(t)}}const It=new class{namespaces=new Map;registerNamesapace(t){const e=new St(t);return this.namespaces.set(t,e),e}getNamesapace(t){return this.namespaces.get(t)}async showDialog(t){const e=(new m).title("设置选项").body("选择要设置的模块："),s=[];g(this.namespaces,(([t])=>{s.push(t),e.button(t)}));const i=new wt({dialog:e,onSelect:async e=>{const n=s[e];await this.getNamesapace(n).getPlayer(t).showDialog(i)}});await i.show(t)}};x.register("!","option",(async(t,e)=>{switch(t[1]){case"dialog":case"-d":case void 0:await D((()=>It.showDialog(e)));break;default:throw O("未知的子命令",e)}}));const zt=It.registerNamesapace("scoreboard-statistic").addItem({name:"enable_creative",description:"允许统计创造模式下的行为",values:[[!0],[!1]],defaultValue:!0,events:{changed:(t,e)=>console.warn("scoreboard-statistic:enable_creative -> from",e,"to",t)}}).addItem({name:"enable_cancel_out",description:"对部分统计项启用抵消",values:[[!0],[!1]],defaultValue:!1,events:{changed:(t,e)=>console.warn("scoreboard-statistic:enable_cancel_out -> from",e,"to",t)}}).addItem({name:"enable_confirm_dialog",description:"启用删除记分板时的警告",values:[[!0],[!1]],defaultValue:!0,events:{changed:(t,e)=>console.warn("scoreboard-statistic:enable_confirm_dialog -> from",e,"to",t)}}).addItem({name:"auto_start",description:"添加记分板后是否自动开始统计",values:[[!0],[!1]],defaultValue:!0,events:{changed:(t,e)=>console.warn("scoreboard-statistic:auto_start -> from",e,"to",t)}});var Et=({player:t,target:e,callback:s})=>({events:{entityDie:{option:{entityTypes:[e]},listener(e){const i=e.damageSource.cause,n=e.damageSource.damagingEntity;i===a.entityAttack&&n.id===t.id&&s({type:"increase",value:1})}}}}),$t=({player:t,target:e,callback:s})=>({events:{entityDie:{option:{entities:[t]},listener(t){const i=t.damageSource.cause,n=t.damageSource.damagingEntity;i===a.entityAttack&&n.typeId===e&&s({type:"increase",value:1})}}}}),At=({player:t,target:e,callback:s})=>({events:{entityDie:{option:{entities:[t]},listener(t){`minecraft:${t.damageSource.cause}`===e&&s({type:"increase",value:1})}}}}),Nt=({player:t,target:e,callback:s})=>({events:{playerBreakBlock:{listener(i){const n=i.brokenBlockPermutation;i.player.id===t.id&&n.type.id===e&&s({type:"increase",value:1})}},playerPlaceBlock:{listener(i){const n=i.block;i.player.id===t.id&&n.typeId===e&&s({type:"decrease",value:1})}}}}),kt=({player:t,target:e,callback:s})=>({events:{playerBreakBlock:{listener(i){const n=i.brokenBlockPermutation;i.player.id===t.id&&n.type.id===e&&s({type:"decrease",value:1})}},playerPlaceBlock:{listener(i){const n=i.block;i.player.id===t.id&&n.typeId===e&&s({type:"increase",value:1})}}}});const Bt={"minecraft:killed":Et,killed:Et,"minecraft:killed_by":$t,killed_by:$t,"minecraft:killed_for":At,killed_for:At,"minecraft:mined":Nt,mined:Nt,"minecraft:placed":kt,placed:kt};var Dt=new Map([...Object.entries(Bt),["deathCount",({player:t,callback:e})=>({events:{entityDie:{option:{entities:[t]},listener(){e({type:"increase",value:1})}}}})],["playerKillCount",({player:t,callback:e})=>Et({player:t,target:"minecraft:player",callback:e})],["totalKillCount",({player:t,callback:e})=>({events:{entityDie:{listener(s){const i=s.damageSource.cause,n=s.damageSource.damagingEntity;i===a.entityAttack&&n.id===t.id&&e({type:"increase",value:1})}}}})],["health",({player:t,callback:e})=>({events:{entityHealthChanged:{option:{entities:[t]},listener(t){e({type:"reset",value:t.newValue})}},playerSpawn:{listener(){e({type:"reset",value:20})}}}})]]);class Ot{constructor(t){this.player=t,this.playerOption=zt.getPlayer(t),this.playerDB=ft.get(t)}async add({objectiveId:e,criteria:s,displayName:i=e}){if(t.scoreboard.getObjective(e))return{code:0,message:"DUPLICATE_OBJECTIVE"};const[n]=Pt(s);return Dt.get(n)?(await D((()=>{const s=t.scoreboard.addObjective(e,i);t.scoreboard.setObjectiveAtDisplaySlot(o.Sidebar,{objective:s,sortOrder:c.Ascending}),s.hasParticipant(this.player)||this.player.runCommand(`scoreboard players set @s ${e} 0`)})),await mt.set(e,s),{code:1}):{code:0,message:"UNKNOWN_CRITERIA"}}async remove({objectiveId:e}){return!!mt.get(e)&&(await D((()=>t.scoreboard.removeObjective(e))),await mt.delete(e),!0)}async start({objectiveId:e,criteria:s=mt.get(e)}){if(this.playerDB.has(e))return!1;const i=P(e),[n,a]=Pt(s),o=Dt.get(n)({player:this.player,target:a,callback:t=>{if(!F.wrap(this.player).testGameMode(r.creative)||this.playerOption.getItemVal("enable_creative"))switch(t.type){case"decrease":this.playerOption.getItemVal("enable_cancel_out")&&i.setScore(this.player,i.getScore(this.player)-t.value);break;case"reset":i.setScore(this.player,t.value);break;default:i.setScore(this.player,i.getScore(this.player)+t.value)}}});return await w(o.events,(async({option:e,listener:s},i)=>{e?await D((()=>t.afterEvents[i].subscribe(s,e))):await D((()=>t.afterEvents[i].subscribe(s)))})),await this.playerDB.add(e,o.events),!0}async stop({objectiveId:e}){if(!this.playerDB.has(e))return!1;const s=this.playerDB.getEvents(e);return await w(s,(async({listener:e},s)=>{await D((()=>t.afterEvents[s].unsubscribe(e)))})),await this.playerDB.delete(e),!0}}function Pt(t){return t.split(":").map((t=>t.replace(".",":"))).map(((t,e)=>0===e||t.match(/^(.+)\:/)?t:`minecraft:${t}`))}async function Tt(t,e){const s=zt.getPlayer(e),i=new Ot(e),n=t[2];switch(t[1]){case"add":{const[,,,r,a]=t;if(!n)throw O("objectiveId 是必须的",e);if(!r)throw O("criteria 是必须的",e);s.getItemVal("enable_creative")||e.sendMessage("注意：当前设置不会统计创造模式下的行为");const o=await i.add({objectiveId:n,criteria:r,displayName:a});if(o.code)e.sendMessage(`成功添加记分板 "${a}" (${n}) 使用 "${r}"`);else switch(o.message){case"DUPLICATE_OBJECTIVE":throw O(`添加失败：记分板 ${n} 已存在`,e);case"UNKNOWN_CRITERIA":throw O(`添加失败：未知的准则 ${r}`,e)}if(s.getItemVal("auto_start")){await i.start({objectiveId:n,criteria:r})&&e.sendMessage(`已自动开启您在 ${a} 上的统计`)}break}case"remove":case"rm":case"-r":{async function c(){if(!await i.remove({objectiveId:n}))throw O(`移除失败：记分板 ${n} 不存在或不是统计用记分板`,e);e.sendMessage(`删除成功 ${n}`)}s.getItemVal("enable_confirm_dialog")?await wt.confirm({body:`是否清除记分板 ${n} 上的统计数据，你将永远失去它们`,target:e,onConfirm:c}):await c();break}case"stop":if(!await i.stop({objectiveId:n}))throw O(`暂停失败：您可能没有开启您在记分板 ${n} 上的统计，或该记分板不存在`,e);e.sendMessage(`已暂停您在 ${n} 上的统计`);break;case"start":if(!await i.start({objectiveId:n}))throw O(`开启失败：您可能已经开启您在记分板 ${n} 上的统计，或该记分板不存在`,e);e.sendMessage(`已开启您在 ${n} 上的统计`);break;case"option":case"opt":case"-o":await D((()=>s.showDialog()));break;default:throw O(`未知的子命令 ${t[1]}`,e)}}zt.applyMainPlayer().then((()=>g(t.getAllPlayers(),(t=>zt.applyPlayer(t))))).then((()=>zt.init())).then((async()=>{await w(zt.players,(async([t])=>{const e=gt.init(t),s=new Ot(t),i=e.getParticipated();await e.clear(),await w(i,(async e=>{await s.start({objectiveId:e})&&t.sendMessage(`已重启您在记分板 ${e} 上的统计`)}))})),x.register("!","statistic",Tt)})).catch(f.error);
