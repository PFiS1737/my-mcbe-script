/*!
 * my-mcbe-script-database.js v0.0.0 (https://github.com/PFiS1737/my-mcbe-script#readme)
 * Copyright 2022-2023 PFiS1737
 * Licensed under MIT
 * 
 * This file is automatically generated, please do not change it.
 */
import{system as t,world as r,MinecraftDimensionTypes as n}from"@minecraft/server";var e=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};e.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0}},e.prototype.init_by_array=function(t,r){var n,e,i;for(this.init_seed(19650218),n=1,e=0,i=this.N>r?this.N:r;i;i--){var s=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&s)>>>16)<<16)+1664525*(65535&s))+t[e]+e,this.mt[n]>>>=0,e++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),e>=r&&(e=0)}for(i=this.N-1;i;i--){s=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&s)>>>16)<<16)+1566083941*(65535&s))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},e.prototype.random_int=function(){var t,r=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^t>>>1^r[1&t];for(;n<this.N-1;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^t>>>1^r[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^r[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},e.prototype.random_int31=function(){return this.random_int()>>>1},e.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},e.prototype.random=function(){return this.random_int()*(1/4294967296)},e.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},e.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)};var i=new e(Math.random()*Number.MAX_SAFE_INTEGER),s=function(t){var r=t.length;for(;r--;)t[r]=Math.floor(256*i.random());return t};var o=function(){for(var t=(e=16,s(new Uint8Array(e))),r="",n=0;n<16;++n)r+=t[n].toString(16);var e;return r}(),a=new RegExp('(\\\\)?"@__(F|R|D|M|S|A|U|I|B|L)-'+o+'-(\\d+)__@"',"g"),h=/\{\s*\[native code\]\s*\}/g,u=/function.*?\(/,c=/.*?=>.*?/,f=/[<>\/\u2028\u2029]/g,l=["*","async"],p={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function y(t){return p[t]}function m(t,r){r||(r={}),"number"!=typeof r&&"string"!=typeof r||(r={space:r});var n,e=[],i=[],s=[],p=[],g=[],_=[],d=[],v=[];return r.ignoreFunction&&"function"==typeof t&&(t=void 0),void 0===t?String(t):(n=r.isJSON&&!r.space?JSON.stringify(t):JSON.stringify(t,r.isJSON?null:function(t,n){if(r.ignoreFunction&&function(t){var r=[];for(var n in t)"function"==typeof t[n]&&r.push(n);for(var e=0;e<r.length;e++)delete t[r[e]]}(n),!n&&void 0!==n)return n;var a=this[t],h=typeof a;if("object"===h){if(a instanceof RegExp)return"@__R-"+o+"-"+(i.push(a)-1)+"__@";if(a instanceof Date)return"@__D-"+o+"-"+(s.push(a)-1)+"__@";if(a instanceof Map)return"@__M-"+o+"-"+(p.push(a)-1)+"__@";if(a instanceof Set)return"@__S-"+o+"-"+(g.push(a)-1)+"__@";if(a instanceof Array&&a.filter((function(){return!0})).length!==a.length)return"@__A-"+o+"-"+(_.push(a)-1)+"__@"}return"function"===h?"@__F-"+o+"-"+(e.push(a)-1)+"__@":"undefined"===h?"@__U-"+o+"-"+(d.push(a)-1)+"__@":"number"!==h||isNaN(a)||isFinite(a)?n:"@__I-"+o+"-"+(v.push(a)-1)+"__@"},r.space),"string"!=typeof n?String(n):(!0!==r.unsafe&&(n=n.replace(f,y)),0===e.length&&0===i.length&&0===s.length&&0===p.length&&0===g.length&&0===_.length&&0===d.length&&0===v.length?n:n.replace(a,(function(t,n,o,a){return n?t:"D"===o?'new Date("'+s[a].toISOString()+'")':"R"===o?"new RegExp("+m(i[a].source)+', "'+i[a].flags+'")':"M"===o?"new Map("+m(Array.from(p[a].entries()),r)+")":"S"===o?"new Set("+m(Array.from(g[a].values()),r)+")":"A"===o?"Array.prototype.slice.call("+m(Object.assign({length:_[a].length},_[a]),r)+")":"U"===o?"undefined":"I"===o?v[a]:function(t){var r=t.toString();if(h.test(r))throw new TypeError("Serializing native function: "+t.name);if(u.test(r))return r;if(c.test(r))return r;var n=r.indexOf("("),e=r.substr(0,n).trim().split(" ").filter((function(t){return t.length>0}));return e.filter((function(t){return-1===l.indexOf(t)})).length>0?(e.indexOf("async")>-1?"async ":"")+"function"+(e.join("").indexOf("*")>-1?"*":"")+r.substr(n):r}(e[a])}))))}var g,_,d={exports:{}},v={exports:{}};g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_={rotl:function(t,r){return t<<r|t>>>32-r},rotr:function(t,r){return t<<32-r|t>>>r},endian:function(t){if(t.constructor==Number)return 16711935&_.rotl(t,8)|4278255360&_.rotl(t,24);for(var r=0;r<t.length;r++)t[r]=_.endian(t[r]);return t},randomBytes:function(t){for(var r=[];t>0;t--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(t){for(var r=[],n=0,e=0;n<t.length;n++,e+=8)r[e>>>5]|=t[n]<<24-e%32;return r},wordsToBytes:function(t){for(var r=[],n=0;n<32*t.length;n+=8)r.push(t[n>>>5]>>>24-n%32&255);return r},bytesToHex:function(t){for(var r=[],n=0;n<t.length;n++)r.push((t[n]>>>4).toString(16)),r.push((15&t[n]).toString(16));return r.join("")},hexToBytes:function(t){for(var r=[],n=0;n<t.length;n+=2)r.push(parseInt(t.substr(n,2),16));return r},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var e=t[n]<<16|t[n+1]<<8|t[n+2],i=0;i<4;i++)8*n+6*i<=8*t.length?r.push(g.charAt(e>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,e=0;n<t.length;e=++n%4)0!=e&&r.push((g.indexOf(t.charAt(n-1))&Math.pow(2,-2*e+8)-1)<<2*e|g.indexOf(t.charAt(n))>>>6-2*e);return r}},v.exports=_;var b={utf8:{stringToBytes:function(t){return b.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(b.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var r=[],n=0;n<t.length;n++)r.push(255&t.charCodeAt(n));return r},bytesToString:function(t){for(var r=[],n=0;n<t.length;n++)r.push(String.fromCharCode(t[n]));return r.join("")}}},S=b,A=function(t){return null!=t&&(w(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&w(t.slice(0,0))}(t)||!!t._isBuffer)};function w(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}!function(){var t=v.exports,r=S.utf8,n=A,e=S.bin,i=function(s,o){s.constructor==String?s=o&&"binary"===o.encoding?e.stringToBytes(s):r.stringToBytes(s):n(s)?s=Array.prototype.slice.call(s,0):Array.isArray(s)||s.constructor===Uint8Array||(s=s.toString());for(var a=t.bytesToWords(s),h=8*s.length,u=1732584193,c=-271733879,f=-1732584194,l=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[h>>>5]|=128<<h%32,a[14+(h+64>>>9<<4)]=h;var y=i._ff,m=i._gg,g=i._hh,_=i._ii;for(p=0;p<a.length;p+=16){var d=u,v=c,b=f,S=l;u=y(u,c,f,l,a[p+0],7,-680876936),l=y(l,u,c,f,a[p+1],12,-389564586),f=y(f,l,u,c,a[p+2],17,606105819),c=y(c,f,l,u,a[p+3],22,-1044525330),u=y(u,c,f,l,a[p+4],7,-176418897),l=y(l,u,c,f,a[p+5],12,1200080426),f=y(f,l,u,c,a[p+6],17,-1473231341),c=y(c,f,l,u,a[p+7],22,-45705983),u=y(u,c,f,l,a[p+8],7,1770035416),l=y(l,u,c,f,a[p+9],12,-1958414417),f=y(f,l,u,c,a[p+10],17,-42063),c=y(c,f,l,u,a[p+11],22,-1990404162),u=y(u,c,f,l,a[p+12],7,1804603682),l=y(l,u,c,f,a[p+13],12,-40341101),f=y(f,l,u,c,a[p+14],17,-1502002290),u=m(u,c=y(c,f,l,u,a[p+15],22,1236535329),f,l,a[p+1],5,-165796510),l=m(l,u,c,f,a[p+6],9,-1069501632),f=m(f,l,u,c,a[p+11],14,643717713),c=m(c,f,l,u,a[p+0],20,-373897302),u=m(u,c,f,l,a[p+5],5,-701558691),l=m(l,u,c,f,a[p+10],9,38016083),f=m(f,l,u,c,a[p+15],14,-660478335),c=m(c,f,l,u,a[p+4],20,-405537848),u=m(u,c,f,l,a[p+9],5,568446438),l=m(l,u,c,f,a[p+14],9,-1019803690),f=m(f,l,u,c,a[p+3],14,-187363961),c=m(c,f,l,u,a[p+8],20,1163531501),u=m(u,c,f,l,a[p+13],5,-1444681467),l=m(l,u,c,f,a[p+2],9,-51403784),f=m(f,l,u,c,a[p+7],14,1735328473),u=g(u,c=m(c,f,l,u,a[p+12],20,-1926607734),f,l,a[p+5],4,-378558),l=g(l,u,c,f,a[p+8],11,-2022574463),f=g(f,l,u,c,a[p+11],16,1839030562),c=g(c,f,l,u,a[p+14],23,-35309556),u=g(u,c,f,l,a[p+1],4,-1530992060),l=g(l,u,c,f,a[p+4],11,1272893353),f=g(f,l,u,c,a[p+7],16,-155497632),c=g(c,f,l,u,a[p+10],23,-1094730640),u=g(u,c,f,l,a[p+13],4,681279174),l=g(l,u,c,f,a[p+0],11,-358537222),f=g(f,l,u,c,a[p+3],16,-722521979),c=g(c,f,l,u,a[p+6],23,76029189),u=g(u,c,f,l,a[p+9],4,-640364487),l=g(l,u,c,f,a[p+12],11,-421815835),f=g(f,l,u,c,a[p+15],16,530742520),u=_(u,c=g(c,f,l,u,a[p+2],23,-995338651),f,l,a[p+0],6,-198630844),l=_(l,u,c,f,a[p+7],10,1126891415),f=_(f,l,u,c,a[p+14],15,-1416354905),c=_(c,f,l,u,a[p+5],21,-57434055),u=_(u,c,f,l,a[p+12],6,1700485571),l=_(l,u,c,f,a[p+3],10,-1894986606),f=_(f,l,u,c,a[p+10],15,-1051523),c=_(c,f,l,u,a[p+1],21,-2054922799),u=_(u,c,f,l,a[p+8],6,1873313359),l=_(l,u,c,f,a[p+15],10,-30611744),f=_(f,l,u,c,a[p+6],15,-1560198380),c=_(c,f,l,u,a[p+13],21,1309151649),u=_(u,c,f,l,a[p+4],6,-145523070),l=_(l,u,c,f,a[p+11],10,-1120210379),f=_(f,l,u,c,a[p+2],15,718787259),c=_(c,f,l,u,a[p+9],21,-343485551),u=u+d>>>0,c=c+v>>>0,f=f+b>>>0,l=l+S>>>0}return t.endian([u,c,f,l])};i._ff=function(t,r,n,e,i,s,o){var a=t+(r&n|~r&e)+(i>>>0)+o;return(a<<s|a>>>32-s)+r},i._gg=function(t,r,n,e,i,s,o){var a=t+(r&e|n&~e)+(i>>>0)+o;return(a<<s|a>>>32-s)+r},i._hh=function(t,r,n,e,i,s,o){var a=t+(r^n^e)+(i>>>0)+o;return(a<<s|a>>>32-s)+r},i._ii=function(t,r,n,e,i,s,o){var a=t+(n^(r|~e))+(i>>>0)+o;return(a<<s|a>>>32-s)+r},i._blocksize=16,i._digestsize=16,d.exports=function(r,n){if(null==r)throw new Error("Illegal argument "+r);var s=t.wordsToBytes(i(r,n));return n&&n.asBytes?s:n&&n.asString?e.bytesToString(s):t.bytesToHex(s)}}();var N=d.exports;function M(t,r,n){if(Array.isArray(t))t.forEach(r,n);else if(t&&t[Symbol.iterator])for(let e of t)r.call(n,e,t);else"object"==typeof t&&M(Object.keys(t),((e,i)=>r.call(n,t[e],e,i,t)))}async function O(t,r,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)await r.call(n,t[e],e,t);else if(t&&t[Symbol.iterator])for(let e of t)await r.call(n,e,t);else"object"==typeof t&&await O(Object.keys(t),(async(e,i)=>await r.call(n,t[e],e,i,t)))}function T(t){try{return JSON.parse(t)}catch(r){return function(t,r={}){return new Function(...Object.keys(r),`return ${t}`)(...Object.values(r))}(`(${t})`)}}function j(r){return new Promise(((n,e)=>{t.run((()=>{try{n(r())}catch(t){e(t)}}))}))}r.getDimension(n.overworld);const E=new Map;class x{static open(t,r){return new this(t,r)}constructor(t,n){const e=N("db:"+n+"_"+t.id).slice(8,24);this.id=e,this.objective=function(t,n){const e=r.scoreboard.getObjective(t);if(e||n)return e||r.scoreboard.addObjective(t,n);throw new Error(`Couldn't find objective "${t}".`)}(e,"db:"+n),this._syncDataFromScoreboard(),E.set(e,this)}store=new Map;_syncDataFromScoreboard(){this.store.clear(),M(this.objective.getParticipants(),(t=>{const r=T(t.displayName),n=Object.keys(r)[0],e=r[n];this.store.set(n,{value:e,participant:t})}))}has(t){return this.store.has(t)}async delete(t){if(this.has(t)){const{participant:r}=this.store.get(t);return await j((()=>this.objective.removeParticipant(r))),this.store.delete(t),!0}return!1}async clear(){await O(this.store,(async([,{participant:t}])=>await j((()=>this.objective.removeParticipant(t))))),this.store.clear()}get(t){if(this.has(t))return this.store.get(t).value}async set(t,r){await this.delete(t);const n=m({[t]:r}).replaceAll('"',"'");if(n.length>32767)throw new RangeError("Database: Only accepts a string value less than 32767 characters.");await j((()=>this.objective.setScore(n,1))),this._syncDataFromScoreboard()}getAll(){const t={};for(const[r,n]of this)t[r]=n;return t}*entries(){for(const[t,{value:r}]of this.store.entries())yield[t,r]}*keys(){for(const t of this.store.keys())yield t}*values(){for(const{value:t}of this.store.values())yield t}[Symbol.iterator](){return this.entries()}}export{x as Database};
