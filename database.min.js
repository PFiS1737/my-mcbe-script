/*!
 * my-mcbe-script-database.js v0.0.0 (https://github.com/PFiS1737/my-mcbe-script#readme)
 * Copyright 2022-2024 PFiS1737
 * Licensed under MIT
 * 
 * This file is automatically generated, please do not change it.
 */
import{system as t,world as r}from"@minecraft/server";function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e,i,s={exports:{}},o={exports:{}};e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(t,r){return t<<r|t>>>32-r},rotr:function(t,r){return t<<32-r|t>>>r},endian:function(t){if(t.constructor==Number)return 16711935&i.rotl(t,8)|4278255360&i.rotl(t,24);for(var r=0;r<t.length;r++)t[r]=i.endian(t[r]);return t},randomBytes:function(t){for(var r=[];t>0;t--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(t){for(var r=[],n=0,e=0;n<t.length;n++,e+=8)r[e>>>5]|=t[n]<<24-e%32;return r},wordsToBytes:function(t){for(var r=[],n=0;n<32*t.length;n+=8)r.push(t[n>>>5]>>>24-n%32&255);return r},bytesToHex:function(t){for(var r=[],n=0;n<t.length;n++)r.push((t[n]>>>4).toString(16)),r.push((15&t[n]).toString(16));return r.join("")},hexToBytes:function(t){for(var r=[],n=0;n<t.length;n+=2)r.push(parseInt(t.substr(n,2),16));return r},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var i=t[n]<<16|t[n+1]<<8|t[n+2],s=0;s<4;s++)8*n+6*s<=8*t.length?r.push(e.charAt(i>>>6*(3-s)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<t.length;i=++n%4)0!=i&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(n))>>>6-2*i);return r}},o.exports=i;var a=o.exports,u={utf8:{stringToBytes:function(t){return u.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(u.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var r=[],n=0;n<t.length;n++)r.push(255&t.charCodeAt(n));return r},bytesToString:function(t){for(var r=[],n=0;n<t.length;n++)r.push(String.fromCharCode(t[n]));return r.join("")}}},h=u,c=function(t){return null!=t&&(f(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&f(t.slice(0,0))}(t)||!!t._isBuffer)};function f(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}!function(){var t=a,r=h.utf8,n=c,e=h.bin,i=function(s,o){s.constructor==String?s=o&&"binary"===o.encoding?e.stringToBytes(s):r.stringToBytes(s):n(s)?s=Array.prototype.slice.call(s,0):Array.isArray(s)||s.constructor===Uint8Array||(s=s.toString());for(var a=t.bytesToWords(s),u=8*s.length,h=1732584193,c=-271733879,f=-1732584194,l=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[u>>>5]|=128<<u%32,a[14+(u+64>>>9<<4)]=u;var y=i._ff,m=i._gg,g=i._hh,_=i._ii;for(p=0;p<a.length;p+=16){var d=h,b=c,v=f,S=l;h=y(h,c,f,l,a[p+0],7,-680876936),l=y(l,h,c,f,a[p+1],12,-389564586),f=y(f,l,h,c,a[p+2],17,606105819),c=y(c,f,l,h,a[p+3],22,-1044525330),h=y(h,c,f,l,a[p+4],7,-176418897),l=y(l,h,c,f,a[p+5],12,1200080426),f=y(f,l,h,c,a[p+6],17,-1473231341),c=y(c,f,l,h,a[p+7],22,-45705983),h=y(h,c,f,l,a[p+8],7,1770035416),l=y(l,h,c,f,a[p+9],12,-1958414417),f=y(f,l,h,c,a[p+10],17,-42063),c=y(c,f,l,h,a[p+11],22,-1990404162),h=y(h,c,f,l,a[p+12],7,1804603682),l=y(l,h,c,f,a[p+13],12,-40341101),f=y(f,l,h,c,a[p+14],17,-1502002290),h=m(h,c=y(c,f,l,h,a[p+15],22,1236535329),f,l,a[p+1],5,-165796510),l=m(l,h,c,f,a[p+6],9,-1069501632),f=m(f,l,h,c,a[p+11],14,643717713),c=m(c,f,l,h,a[p+0],20,-373897302),h=m(h,c,f,l,a[p+5],5,-701558691),l=m(l,h,c,f,a[p+10],9,38016083),f=m(f,l,h,c,a[p+15],14,-660478335),c=m(c,f,l,h,a[p+4],20,-405537848),h=m(h,c,f,l,a[p+9],5,568446438),l=m(l,h,c,f,a[p+14],9,-1019803690),f=m(f,l,h,c,a[p+3],14,-187363961),c=m(c,f,l,h,a[p+8],20,1163531501),h=m(h,c,f,l,a[p+13],5,-1444681467),l=m(l,h,c,f,a[p+2],9,-51403784),f=m(f,l,h,c,a[p+7],14,1735328473),h=g(h,c=m(c,f,l,h,a[p+12],20,-1926607734),f,l,a[p+5],4,-378558),l=g(l,h,c,f,a[p+8],11,-2022574463),f=g(f,l,h,c,a[p+11],16,1839030562),c=g(c,f,l,h,a[p+14],23,-35309556),h=g(h,c,f,l,a[p+1],4,-1530992060),l=g(l,h,c,f,a[p+4],11,1272893353),f=g(f,l,h,c,a[p+7],16,-155497632),c=g(c,f,l,h,a[p+10],23,-1094730640),h=g(h,c,f,l,a[p+13],4,681279174),l=g(l,h,c,f,a[p+0],11,-358537222),f=g(f,l,h,c,a[p+3],16,-722521979),c=g(c,f,l,h,a[p+6],23,76029189),h=g(h,c,f,l,a[p+9],4,-640364487),l=g(l,h,c,f,a[p+12],11,-421815835),f=g(f,l,h,c,a[p+15],16,530742520),h=_(h,c=g(c,f,l,h,a[p+2],23,-995338651),f,l,a[p+0],6,-198630844),l=_(l,h,c,f,a[p+7],10,1126891415),f=_(f,l,h,c,a[p+14],15,-1416354905),c=_(c,f,l,h,a[p+5],21,-57434055),h=_(h,c,f,l,a[p+12],6,1700485571),l=_(l,h,c,f,a[p+3],10,-1894986606),f=_(f,l,h,c,a[p+10],15,-1051523),c=_(c,f,l,h,a[p+1],21,-2054922799),h=_(h,c,f,l,a[p+8],6,1873313359),l=_(l,h,c,f,a[p+15],10,-30611744),f=_(f,l,h,c,a[p+6],15,-1560198380),c=_(c,f,l,h,a[p+13],21,1309151649),h=_(h,c,f,l,a[p+4],6,-145523070),l=_(l,h,c,f,a[p+11],10,-1120210379),f=_(f,l,h,c,a[p+2],15,718787259),c=_(c,f,l,h,a[p+9],21,-343485551),h=h+d>>>0,c=c+b>>>0,f=f+v>>>0,l=l+S>>>0}return t.endian([h,c,f,l])};i._ff=function(t,r,n,e,i,s,o){var a=t+(r&n|~r&e)+(i>>>0)+o;return(a<<s|a>>>32-s)+r},i._gg=function(t,r,n,e,i,s,o){var a=t+(r&e|n&~e)+(i>>>0)+o;return(a<<s|a>>>32-s)+r},i._hh=function(t,r,n,e,i,s,o){var a=t+(r^n^e)+(i>>>0)+o;return(a<<s|a>>>32-s)+r},i._ii=function(t,r,n,e,i,s,o){var a=t+(n^(r|~e))+(i>>>0)+o;return(a<<s|a>>>32-s)+r},i._blocksize=16,i._digestsize=16,s.exports=function(r,n){if(null==r)throw new Error("Illegal argument "+r);var s=t.wordsToBytes(i(r,n));return n&&n.asBytes?s:n&&n.asString?e.bytesToString(s):t.bytesToHex(s)}}();var l=n(s.exports),p=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};p.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0}},p.prototype.init_by_array=function(t,r){var n,e,i;for(this.init_seed(19650218),n=1,e=0,i=this.N>r?this.N:r;i;i--){var s=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&s)>>>16)<<16)+1664525*(65535&s))+t[e]+e,this.mt[n]>>>=0,e++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),e>=r&&(e=0)}for(i=this.N-1;i;i--){s=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&s)>>>16)<<16)+1566083941*(65535&s))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},p.prototype.random_int=function(){var t,r=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^t>>>1^r[1&t];for(;n<this.N-1;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^t>>>1^r[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^r[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},p.prototype.random_int31=function(){return this.random_int()>>>1},p.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},p.prototype.random=function(){return this.random_int()*(1/4294967296)},p.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},p.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)};var y=new p(Math.random()*Number.MAX_SAFE_INTEGER);var m=n((function(t){var r=t.length;for(;r--;)t[r]=Math.floor(256*y.random());return t}));const g=function(){const t=(r=16,m(new Uint8Array(r)));var r;let n="";for(let r=0;r<16;++r)n+=t[r].toString(16);return n}(),_=new RegExp(`(\\\\)?"@__(F|R|D|M|S|A|U|I|B|L)-${g}-(\\d+)__@"`,"g"),d=/\{\s*\[native code\]\s*\}/g,b=/function.*?\(/,v=/.*?=>.*?/,S=/[<>\/\u2028\u2029]/g,A=["*","async"],w={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function $(t){return w[t]}function N(t,r){r||(r={}),"number"!=typeof r&&"string"!=typeof r||(r={space:r});const n=[],e=[],i=[],s=[],o=[],a=[],u=[],h=[];if(r.ignoreFunction&&"function"==typeof t&&(t=void 0),void 0===t)return String(t);let c;return c=r.isJSON&&!r.space?JSON.stringify(t):JSON.stringify(t,r.isJSON?null:function(t,c){if(r.ignoreFunction&&function(t){const r=[];for(const n in t)"function"==typeof t[n]&&r.push(n);for(let n=0;n<r.length;n++)delete t[r[n]]}(c),!c&&void 0!==c)return c;const f=this[t],l=typeof f;if("object"===l){if(f instanceof RegExp)return`@__R-${g}-${e.push(f)-1}__@`;if(f instanceof Date)return`@__D-${g}-${i.push(f)-1}__@`;if(f instanceof Map)return`@__M-${g}-${s.push(f)-1}__@`;if(f instanceof Set)return`@__S-${g}-${o.push(f)-1}__@`;if(Array.isArray(f)&&f.filter((()=>!0)).length!==f.length)return`@__A-${g}-${a.push(f)-1}__@`}return"function"===l?`@__F-${g}-${n.push(f)-1}__@`:"undefined"===l?`@__U-${g}-${u.push(f)-1}__@`:"number"!==l||Number.isNaN(f)||Number.isFinite(f)?c:`@__I-${g}-${h.push(f)-1}__@`},r.space),"string"!=typeof c?String(c):(!0!==r.unsafe&&(c=c.replace(S,$)),0===n.length&&0===e.length&&0===i.length&&0===s.length&&0===o.length&&0===a.length&&0===u.length&&0===h.length?c:c.replace(_,((t,u,c,f)=>{if(u)return t;if("D"===c)return`new Date("${i[f].toISOString()}")`;if("R"===c)return`new RegExp(${N(e[f].source)}, "${e[f].flags}")`;if("M"===c)return`new Map(${N(Array.from(s[f].entries()),r)})`;if("S"===c)return`new Set(${N(Array.from(o[f].values()),r)})`;if("A"===c)return`Array.prototype.slice.call(${N(Object.assign({length:a[f].length},a[f]),r)})`;if("U"===c)return"undefined";if("I"===c)return h[f];return function(t){const r=t.toString();if(d.test(r))throw new TypeError(`Serializing native function: ${t.name}`);if(b.test(r))return r;if(v.test(r))return r;const n=r.indexOf("("),e=r.substr(0,n).trim().split(" ").filter((t=>t.length>0));return e.filter((t=>-1===A.indexOf(t))).length>0?`${e.indexOf("async")>-1?"async ":""}function${e.join("").indexOf("*")>-1?"*":""}${r.substr(n)}`:r}(n[f])})))}function M(r){return new Promise(((n,e)=>{t.run((()=>{try{n(r())}catch(t){e(t)}}))}))}function O(t,r,n){if(Array.isArray(t))t.forEach(r,n);else if(t?.[Symbol.iterator])for(const e of t)r.call(n,e,t);else"object"==typeof t&&O(Object.keys(t),((e,i)=>r.call(n,t[e],e,i,t)))}async function T(t,r,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)await r.call(n,t[e],e,t);else if(t?.[Symbol.iterator])for(const e of t)await r.call(n,e,t);else"object"==typeof t&&await T(Object.keys(t),(async(e,i)=>await r.call(n,t[e],e,i,t)))}function j(t){try{return JSON.parse(t)}catch(r){return function(t,r={}){return new Function(...Object.keys(r),`return ${t}`)(...Object.values(r))}(`(${t})`)}}const E=new Map;class x{static open(t,r){return new x(t,r)}constructor(t,n){const e=l(`db:${n}_${t.id}`).slice(8,24);this.id=e,this.objective=function(t,n){const e=r.scoreboard.getObjective(t);if(!e&&!n)throw new Error(`Couldn't find objective "${t}".`);return e||r.scoreboard.addObjective(t,n)}(e,`db:${n}`),this._syncDataFromScoreboard(),E.set(e,this)}store=new Map;_syncDataFromScoreboard(){this.store.clear(),O(this.objective.getParticipants(),(t=>{const r=j(t.displayName),n=Object.keys(r)[0],e=r[n];this.store.set(n,{value:e,participant:t})}))}has(t){return this.store.has(t)}async delete(t){if(this.has(t)){const{participant:r}=this.store.get(t);return await M((()=>this.objective.removeParticipant(r))),this.store.delete(t),!0}return!1}async clear(){await T(this.store,(async([,{participant:t}])=>await M((()=>this.objective.removeParticipant(t))))),this.store.clear()}get(t){if(this.has(t))return this.store.get(t).value}async set(t,r){await this.delete(t);const n=N({[t]:r}).replaceAll('"',"'");if(n.length>32767)throw new RangeError("Database: Only accepts a string value less than 32767 characters.");await M((()=>this.objective.setScore(n,1))),this._syncDataFromScoreboard()}getAll(){const t={};for(const[r,n]of this)t[r]=n;return t}*entries(){for(const[t,{value:r}]of this.store.entries())yield[t,r]}*keys(){for(const t of this.store.keys())yield t}*values(){for(const{value:t}of this.store.values())yield t}[Symbol.iterator](){return this.entries()}}export{x as Database};
